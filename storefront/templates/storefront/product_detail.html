{% extends "membership/base.html" %}
{% load int_to_rupiah %}
  {% block title %}
    <title>Store | kei-partner.com</title>
  {% endblock %}
  {% block content %}
  {% include "membership/header.html" %}
  <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">

            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
          <a class="navbar-brand" href="#">KEI-Partner</a>
        </div>
    
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#"><span class="glyphicon glyphicon-home"></span> <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Store</a></li>
            <li><a href="#">Blog</a></li>
            <li class="active"><a href="#">Member Area</a></li>
            <li><a href="#">Business Oportunity</a></li>
          </ul>
          {% include "shopping_cart/wishlist_header.html" %}
          {% include "shopping_cart/cart_header.html" %}  
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <script>
  
        function setHeight(img){
          img.style.minHeight = '0';
          if(window.innerWidth>767){
            if(img.classList.contains("main-photo") != false){
              img.style.maxHeight = '440px';
            } else {
              img.style.maxHeight = '140px';
            }
          } else {
            if(img.classList.contains("main-photo") != false){
              img.style.maxHeight = '140px';
            } else {
              img.style.maxHeight = '110px';
            }
          }
          img.style.height = img.clientWidth+'px';
          img.style.backgroundSize='auto 100%';
          img.style.overflow='hidden';
          img.style.objectFit='cover';
        } 
    </script>
    <div class="container container-form container-bg">
      <section name="header">
        <div class="container"> 
        <div class="row"style="margin-top:0.5%">
          <div class="col-xs -12 col-lg-8" style="padding:0">
            <div class="col-xs-12 card-bottom card-md effect5" style="margin:0 0 20px 0;display:block;">
              <section name="post-header">
                  <div class="hidden-xs col-md-12" style="border-bottom: 1px solid #ccc; padding: 20px">
                      <h3 class="title" style="padding:10px;margin:0">{{ product.name | title }} 
                      </h3>
                  </div>
                  <div class="col-xs-12 main-photo-box">
                    <div class="col-xs-8">
                        <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                        src="{{ product.get_photo_url }}">
                    </div>
                    <div class="col-xs-2" style="padding: 0">
                        <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                        src="{{ product.get_photo_url }}">
                        <br>
                        <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                        src="{{ product.get_photo_url }}">
                        <br>
                        <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                        src="{{ product.get_photo_url }}">
                      </div>
                    <div class="col-xs-2" style="padding: 0">
                      <div style="padding: 2px; background-color: rgb(131, 131, 131)">
                        <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                        src="{{ product.get_photo_url }}">
                      </div>
                      <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                      src="{{ product.get_photo_url }}">
                      <br>
                      <img onLoad="setHeight(this)" class="photo-user photo-article main-photo" style="display:block;padding:5px; margin:0" 
                      src="{{ product.get_photo_url }}">
                    </div>
                  </div>
                  <div class="col-xs-12 main-photo-box">
                    <h5 class="title" style="text-align: left">
                        Deskripsi :</h5>
                        <p>{{ product.description | linebreaksbr }}</p>
                    <h5 class="title" style="text-align: left">
                        Berat Satuan : {{ product.unit_weight }}gr</h5>
                    <div class="col-xs-12 col-lg-12" style="display: flex; justify-content: center">
                      <button class="btn btn-danger" type="submit" 
                        style="width:auto;margin:0 15px; padding: 12px; display: flex; justify-content: center">
                        Tambah ke Wishlist
                        <span class="glyphicon glyphicon-heart" style="font-size: 18px"></span>
                        <sup><span class="glyphicon glyphicon-plus" 
                          style="color: #45ff45; font-size: 8px;"></span></sup>
                      </button>
                    </div>
                  </div>
              </section>

                <section name="post-footer">
                  <div class="hidden-xs col-md-12" style="border-top: 1px solid #ccc; padding: 20px">
                    <div class="col-xs-6">
                      {% if discounted_price != 0 %}
                        <h5 class="title hot" style="text-align:left; margin:0;">
                        Harga Normal : <del>Rp. {{ product.price | int_to_rupiah }},-</del> <br>
                        <sub>*({{ discount }}% Discount untuk {{ request.user.member.get_member_type_display }})</sub>
                        </h5>
                        <h3 class="title cool" style="text-align:left; margin:0;">
                            Rp. {{ discounted_price | int_to_rupiah }},-
                        </h3>
                      {% else %}
                        <h3 class="title cool" style="text-align:left; margin:0;">
                            Rp. {{ product.price | int_to_rupiah }},-
                        </h3>
                      {% endif %}
                    </div>
                    <form class="form" method="POST">
                        {% if form.errors %}
                            {% for field in form %}
                                {% for error in field.errors %}
                                    <div class="alert alert-danger">
                                        <strong>{{ error|escape }}</strong>
                                    </div>
                                {% endfor %}
                            {% endfor %}
                            {% for error in form.non_field_errors %}
                                <div class="alert alert-danger">
                                    <strong>{{ error|escape }}</strong>
                                </div>
                            {% endfor %}
                        {% endif %}
                        {% csrf_token %}
                      <div class="col-xs-12 col-lg-6" style="padding:10px; display: flex; justify-content: center">
                          <div style="display: flex; justify-content:baseline; align-items: baseline; flex-direction: row">
                              <p class="title" style="margin: 0">Banyaknya:</p>
                              {{ form.quantity }}
                          </div>
                           
                            <button class="btn btn-primary" type="submit" 
                              style="width:auto;margin:0 15px; padding: 12px; display: flex; justify-content: center">
                              Beli 
                              <span class="glyphicon glyphicon-shopping-cart" style="font-size: 18px"></span>
                              <sup><span class="glyphicon glyphicon-plus" 
                                style="color: #45ff45; font-size: 8px;"></span></sup>
                            </button>
                        </div> 
                      </div>
                    </form>
                </section>
              </div>
          </div>
          <div class="hidden-xs col-lg-1"></div>
          {% if other_product %}
          <div class="col-xs-12 col-lg-3 card-bottom  effect5 card-deck">
            <div class="col-lg-12" style="margin-top: 12px;">
                <h4 class="title" style="font-size:20px">Produk Menarik Lainnya</h4></div>
            <!-- ====================================================================================================================================== --> 
            {% for p in other_product %}
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-12  card-bottom  card-sm"  style="margin-bottom:4%;padding:0 5px">
              <div class="col-xs-4" style="padding:0 2px">
                <img  id="saran-4" class="photo-user saran" onLoad="setHeight(this)" src="{{ p.get_photo_url }}"></div>
              <div class="col-xs-8" style="padding:15px">
                <h5 style="margin:0" id="cards3-title" class="title">
                  <a href="{{ p.get_detail_url }}">{{ p.name | truncatewords:5 | title }}</a></h5>
                <h4 class="titlesm cool" style="text-align:center; margin:0;">
                Rp. {{p.price | int_to_rupiah}},-
                </h4>
                <p style="font-size: 80%">
                  {{ p.description | truncatewords:5}}
                </p>
              </div></div>
            {% endfor %}
  <!-- ====================================================================================================================================== --> 
          </div>
          {% endif %}
        </div></div></div></div>
  <!-- ====================================================================================================================================== -->
 
  <!-- ====================================================================================================================================== -->
          
          </div></div>

{% include "membership/footer.html" %}
{% include "membership/script.html" %}
{% endblock %}
