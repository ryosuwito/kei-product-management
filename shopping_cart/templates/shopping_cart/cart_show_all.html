{% extends "membership/base.html" %}
{% load int_to_rupiah int_to_quantity int_to_kilogram%}
  {% block title %}
    <title>Store | kei-partner.com</title>
  {% endblock %}
  {% block content %}
    <script>
  
        function setHeight(img){
          img.style.width = '100%';
          img.style.minHeight = '0';
          if(window.innerWidth>767){
            if(img.classList.contains("main-photo") != false){
              img.style.maxHeight = '440px';
            } else {
              img.style.maxHeight = '140px';
            }
          } else {
            if(img.classList.contains("main-photo") != false){
              img.style.maxHeight = '140px';
            } else {
              img.style.maxHeight = '110px';
            }
          }
          img.style.height = img.clientWidth+'px';
          img.style.backgroundSize='auto 100%';
          img.style.overflow='hidden';
          img.style.objectFit='cover';
        } 
    </script>
    <div class="container container-form container-bg">
      <section name="header">
        <div class="container"> 
        <div class="row">
          <div class="col-xs-12 col-lg-12 ">
            <div class="col-lg-12" style="margin-top: 12px;">
            {% if not cart.get_total_items_in_cart %}
                <h4 class="title" style="font-size:20px">Tidak ada produk dalam keranjang <br>
                <a href="{% url 'storefront:product_all' %}">Kembali ke toko</a></h4></div>
            <!-- ====================================================================================================================================== --> 

            {% else %}
                <h4 class="title" style="font-size:20px">Produk dalam keranjang</h4></div>
                {% for item in cart.get_items_in_cart %}
                <form method="POST">
                    {% csrf_token %}
                    <div class="col-xs-6 card-bottom card-sm"  style="padding:0 5px">
                        <div class="col-xs-2" style="padding:0">
                            <img class="photo-user=" onLoad="setHeight(this)" src="{{ item.product.get_photo_url }}"></div>
                        <div class="col-xs-10">
                            <div class="col-xs-5">
                              <h5 style="text-align:left; margin:0" class="title">
                                  <a href="{{ item.product.get_detail_url }}">{{ item.product.name | title | truncatechars:45}}</a>
                              </h5>
                              <p>
                                 Harga Satuan : {{ item.product.price| int_to_rupiah }}<br>
                                 Berat Satuan : {{ item.product.unit_weight | int_to_kilogram }}
                              </p>
                            </div>
                            <div class="col-xs-5">
                              <p style="margin-bottom: 0">
                                  Jumlah Bayar :
                              </p>
                              <h4 class="titlesm cool" style="text-align:left; margin-top: 0">
                                  {{ item.get_item_details.subtotal | int_to_rupiah }}
                              </h4>
                              <p style="font-size: 90%">Banyaknya : <strong>{{ item.quantity | int_to_quantity }}</strong><br>
                                  Jumlah Berat : {{ item.get_item_details.total_weight | int_to_kilogram }}</p>
                            </div>
                            <div class="col-xs-2">
                                <input type="hidden" name="item" value="item_{{item.pk}}">
                                <button class="btn btn-danger" type="submit">Hapus</button>
                            </div>
                        </div>
                    </div>
                </form>
                {% endfor %}
            {% endif %}
  <!-- ====================================================================================================================================== --> 

            </div>
        </div>
        <div style="width: 100%; margin-bottom:5px; display:block; height: 20ox; border-top: 1px solid #444">
        </div>
        <div class="col-xs-8">
        </div>
        <div class="col-xs-4" style="padding: 0">
            <h4 class="title" style="font-size:20px">Total Belanja</h4>
            <div class="row" style="margin: 0; border-bottom: 1px solid #444">
                <div class="col-xs-5">
                    <h5>Banyaknya</h5>
                </div>
                <div class="col-xs-7">
                <h5>
                    <strong>: {{ cart.get_total_products | int_to_quantity }}</strong>
                </h5>
                </div>
            </div>
            <div class="row" style="margin: 0; border-bottom: 1px solid #444">
                <div class="col-xs-5">
                    <h5>Jumlah Bayar</h5> 
                </div>
                <div class="col-xs-7">
                    <h5>
                        <strong>: {{ cart.get_total_price | int_to_rupiah }}</strong>
                    </h5>        
                </div>
            </div>
            <div class="row" style="margin: 0; border-bottom: 1px solid #444">
                <div class="col-xs-5">
                    <h5>Jumlah Berat</h5> 
                </div>
                <div class="col-xs-7">
                    <h5>
                        <strong>: {{ cart.get_total_weight | int_to_kilogram}}</strong>
                    </h5>        
                </div>
            </div>
            <div class="row" style="margin: 10px 0 0 0;">
                <p onclick="window.location.href='{{item.product.get_detail_url}}'" 
                class="btn btn-primary" style="margin:auto; width: 100%">Lanjutkan Pembayaran</p>
            </div>
            
        </div>
      </div></div></div>
  <!-- ====================================================================================================================================== -->
 
  <!-- ====================================================================================================================================== -->
          
          </div></div>

{% include "membership/footer.html" %}
{% include "membership/script.html" %}
{% endblock %}
